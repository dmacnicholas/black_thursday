<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <title>Code coverage for Black thursday</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script src='./assets/0.12.3/application.js' type='text/javascript'></script>
    <link href='./assets/0.12.3/application.css' media='screen, projection, print' rel='stylesheet' type='text/css' />
    <link rel="shortcut icon" type="image/png" href="./assets/0.12.3/favicon_red.png" />
    <link rel="icon" type="image/png" href="./assets/0.12.3/favicon.png" />
  </head>

  <body>
    <div id="loading">
      <img src="./assets/0.12.3/loading.gif" alt="loading"/>
    </div>
    <div id="wrapper" class="hide">
      <div class="timestamp">Generated <abbr class="timeago" title="2022-06-05T17:09:27-06:00">2022-06-05T17:09:27-06:00</abbr></div>
      <ul class="group_tabs"></ul>

      <div id="content">
        <div class="file_list_container" id="AllFiles">
  <h2>
    <span class="group_name">All Files</span>
    (<span class="covered_percent">
      <span class="red">
  80.0%
</span>

     </span>
     covered at
     <span class="covered_strength">
       <span class="green">
         152559.99
       </span>
    </span> hits/line
    )
  </h2>

  <a name="AllFiles"></a>

  <div>
    <b>13</b> files in total.
  </div>

  <div class="t-line-summary">
    <b>290</b> relevant lines,
    <span class="green"><b>232</b> lines covered</span> and
    <span class="red"><b>58</b> lines missed. </span>
    (<span class="red">
  80.0%
</span>
)
  </div>

  

  <div class="file_list--responsive">
    <table class="file_list">
      <thead>
        <tr>
          <th>File</th>
          <th class="cell--number">% covered</th>
          <th class="cell--number">Lines</th>
          <th class="cell--number">Relevant Lines</th>
          <th class="cell--number">Lines covered</th>
          <th class="cell--number">Lines missed</th>
          <th class="cell--number">Avg. Hits / Line</th>
          
        </tr>
      </thead>
      <tbody>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#3d21d94d40ee5631c000ae7154f652a564dbbcfe" class="src_link" title="lib/enumerable.rb">lib/enumerable.rb</a></td>
            <td class="red strong cell--number t-file__coverage">55.00 %</td>
            <td class="cell--number">35</td>
            <td class="cell--number">20</td>
            <td class="cell--number">11</td>
            <td class="cell--number">9</td>
            <td class="cell--number">1623843.20</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#b1341bac541761bc60ba573fe6a0ca53f1bedfab" class="src_link" title="lib/invoice.rb">lib/invoice.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">13</td>
            <td class="cell--number">10</td>
            <td class="cell--number">10</td>
            <td class="cell--number">0</td>
            <td class="cell--number">47856.40</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#223f2bafb436d49b4a7ac67c8472947e50bce74f" class="src_link" title="lib/invoice_item.rb">lib/invoice_item.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">17</td>
            <td class="cell--number">13</td>
            <td class="cell--number">13</td>
            <td class="cell--number">0</td>
            <td class="cell--number">188074.31</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#c92ba4b5f048358adf3964b8cf877a8c72682024" class="src_link" title="lib/invoice_item_repository.rb">lib/invoice_item_repository.rb</a></td>
            <td class="red strong cell--number t-file__coverage">54.55 %</td>
            <td class="cell--number">52</td>
            <td class="cell--number">22</td>
            <td class="cell--number">12</td>
            <td class="cell--number">10</td>
            <td class="cell--number">15878.91</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#814c0fb45dd8e6ddcda193c5f3e6a3ba8c9f6dc9" class="src_link" title="lib/invoice_repository.rb">lib/invoice_repository.rb</a></td>
            <td class="red strong cell--number t-file__coverage">66.67 %</td>
            <td class="cell--number">52</td>
            <td class="cell--number">21</td>
            <td class="cell--number">14</td>
            <td class="cell--number">7</td>
            <td class="cell--number">4513.10</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#50bad2b60bf34b073e6f61634d96eac59eedded9" class="src_link" title="lib/item.rb">lib/item.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">17</td>
            <td class="cell--number">13</td>
            <td class="cell--number">13</td>
            <td class="cell--number">0</td>
            <td class="cell--number">11777.69</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#177caf66802caeaf51a7f7fbf03afa9c04188dcb" class="src_link" title="lib/item_repository.rb">lib/item_repository.rb</a></td>
            <td class="red strong cell--number t-file__coverage">53.33 %</td>
            <td class="cell--number">57</td>
            <td class="cell--number">30</td>
            <td class="cell--number">16</td>
            <td class="cell--number">14</td>
            <td class="cell--number">731.07</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#b980855699b82200604cdf81da7829de3e871b30" class="src_link" title="lib/merchant.rb">lib/merchant.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">9</td>
            <td class="cell--number">6</td>
            <td class="cell--number">6</td>
            <td class="cell--number">0</td>
            <td class="cell--number">2534.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#731243b6bab1f0e2089014b0a3f9e77a52ad39ff" class="src_link" title="lib/merchant_repository.rb">lib/merchant_repository.rb</a></td>
            <td class="red strong cell--number t-file__coverage">70.59 %</td>
            <td class="cell--number">32</td>
            <td class="cell--number">17</td>
            <td class="cell--number">12</td>
            <td class="cell--number">5</td>
            <td class="cell--number">450.35</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#c558a235768a595534dc1945991abd07b4af324d" class="src_link" title="lib/sales_analyst.rb">lib/sales_analyst.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">155</td>
            <td class="cell--number">89</td>
            <td class="cell--number">89</td>
            <td class="cell--number">0</td>
            <td class="cell--number">84739.38</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#48d43f8edf576f936fa28da7b8f13b2f94b7b70d" class="src_link" title="lib/sales_engine.rb">lib/sales_engine.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">18</td>
            <td class="cell--number">11</td>
            <td class="cell--number">11</td>
            <td class="cell--number">0</td>
            <td class="cell--number">10.55</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#c60e3aa0403351fe53ce3743685e8b277ba822de" class="src_link" title="lib/transaction.rb">lib/transaction.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">14</td>
            <td class="cell--number">11</td>
            <td class="cell--number">11</td>
            <td class="cell--number">0</td>
            <td class="cell--number">50756.73</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#d5798281d092cd84bc5eca4aaff65551ee12e432" class="src_link" title="lib/transaction_repository.rb">lib/transaction_repository.rb</a></td>
            <td class="red strong cell--number t-file__coverage">51.85 %</td>
            <td class="cell--number">61</td>
            <td class="cell--number">27</td>
            <td class="cell--number">14</td>
            <td class="cell--number">13</td>
            <td class="cell--number">3694.30</td>
            
          </tr>
        
      </tbody>
    </table>
  </div>
</div>


        
      </div>

      <div id="footer">
        Generated by <a href="https://github.com/simplecov-ruby/simplecov">simplecov</a> v0.21.2
        and simplecov-html v0.12.3<br/>
        using Unit Tests
      </div>

      <div class="source_files">
      
        <div class="source_table" id="3d21d94d40ee5631c000ae7154f652a564dbbcfe">
  <div class="header">
    <h3>lib/enumerable.rb</h3>
    <h4>
      <span class="red">
  55.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>20</b> relevant lines.
      <span class="green"><b>11</b> lines covered</span> and
      <span class="red"><b>9</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">module Enumerable</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_by_id(id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="34734" data-linenumber="4">
            <span class="hits">34734</span>
            

            

            <code class="ruby">    @all.find {|row| row.id == id}</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="5">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="7">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_by_name(name)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="8">
            
            

            

            <code class="ruby">    @all.find {|row| row.name.upcase == name.upcase}</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="11">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def delete(id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="12">
            
            

            

            <code class="ruby">    key = find_by_id(id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="13">
            
            

            

            <code class="ruby">    @all.delete(key)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="14">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="15">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="16">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def update(id, attributes)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="17">
            
            

            

            <code class="ruby">    key = attributes.keys[0]</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="18">
            
            

            

            <code class="ruby">    value = attributes.values[0]</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="19">
            
            

            

            <code class="ruby">    change(id, key, value)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="20">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="21">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="22">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_all_by_merchant_id(merchant_id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="28696536" data-linenumber="23">
            <span class="hits">28696536</span>
            

            

            <code class="ruby">    @all.find_all {|row| row.merchant_id == merchant_id}</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="24">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="26">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def create(attributes)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="27">
            
            

            

            <code class="ruby">    last_id = @all[-1].id</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="28">
            
            

            

            <code class="ruby">    new_id = last_id + 1</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="29">
            
            

            

            <code class="ruby">    add_new(new_id, attributes)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="30">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="31">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="32">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def unit_price_to_dollars</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3745586" data-linenumber="33">
            <span class="hits">3745586</span>
            

            

            <code class="ruby">    (@unit_price.to_f)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="34">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="35">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="b1341bac541761bc60ba573fe6a0ca53f1bedfab">
  <div class="header">
    <h3>lib/invoice.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>10</b> relevant lines.
      <span class="green"><b>10</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class Invoice</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_reader :id, :customer_id, :merchant_id, :created_at</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_accessor :status, :updated_at</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def initialize(invoice)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="79760" data-linenumber="6">
            <span class="hits">79760</span>
            

            

            <code class="ruby">    @id = invoice[:id].to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="79760" data-linenumber="7">
            <span class="hits">79760</span>
            

            

            <code class="ruby">    @customer_id = invoice[:customer_id].to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="79760" data-linenumber="8">
            <span class="hits">79760</span>
            

            

            <code class="ruby">    @merchant_id = invoice[:merchant_id].to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="79760" data-linenumber="9">
            <span class="hits">79760</span>
            

            

            <code class="ruby">    @status = invoice[:status].to_sym</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="79760" data-linenumber="10">
            <span class="hits">79760</span>
            

            

            <code class="ruby">    @created_at = invoice[:created_at]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="79760" data-linenumber="11">
            <span class="hits">79760</span>
            

            

            <code class="ruby">    @updated_at = invoice[:updated_at]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="12">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="13">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="223f2bafb436d49b4a7ac67c8472947e50bce74f">
  <div class="header">
    <h3>lib/invoice_item.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>13</b> relevant lines.
      <span class="green"><b>13</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">require_relative &#39;./enumerable&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">class InvoiceItem</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">  include Enumerable</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_reader :id, :item_id, :invoice_id, :created_at</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="6">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_accessor :quantity, :unit_price, :updated_at</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="8">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def initialize(data)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="349280" data-linenumber="9">
            <span class="hits">349280</span>
            

            

            <code class="ruby">    @id = data[:id].to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="349280" data-linenumber="10">
            <span class="hits">349280</span>
            

            

            <code class="ruby">    @item_id = data[:item_id].to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="349280" data-linenumber="11">
            <span class="hits">349280</span>
            

            

            <code class="ruby">    @invoice_id = data[:invoice_id].to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="349280" data-linenumber="12">
            <span class="hits">349280</span>
            

            

            <code class="ruby">    @quantity = data[:quantity].to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="349280" data-linenumber="13">
            <span class="hits">349280</span>
            

            

            <code class="ruby">    @unit_price = data[:unit_price]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="349280" data-linenumber="14">
            <span class="hits">349280</span>
            

            

            <code class="ruby">    @created_at = data[:created_at]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="349280" data-linenumber="15">
            <span class="hits">349280</span>
            

            

            <code class="ruby">    @updated_at = data[:updated_at]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="17">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="c92ba4b5f048358adf3964b8cf877a8c72682024">
  <div class="header">
    <h3>lib/invoice_item_repository.rb</h3>
    <h4>
      <span class="red">
  54.55%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>22</b> relevant lines.
      <span class="green"><b>12</b> lines covered</span> and
      <span class="red"><b>10</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">require_relative &#39;./enumerable&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">class InvoiceItemRepository</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">  include Enumerable</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_reader :all</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="7">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def initialize(file_path)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="8">
            <span class="hits">16</span>
            

            

            <code class="ruby">    @file_path = file_path</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="9">
            <span class="hits">16</span>
            

            

            <code class="ruby">    @all = []</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="11">
            <span class="hits">16</span>
            

            

            <code class="ruby">    CSV.foreach(file_path, headers: true, header_converters: :symbol) do |row|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="349280" data-linenumber="12">
            <span class="hits">349280</span>
            

            

            <code class="ruby">      @all &lt;&lt; InvoiceItem.new({</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="13">
            
            

            

            <code class="ruby">        id: row[:id],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="14">
            
            

            

            <code class="ruby">        item_id: row[:item_id],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="15">
            
            

            

            <code class="ruby">        invoice_id: row[:invoice_id],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            
            

            

            <code class="ruby">        quantity: row[:quantity],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="17">
            
            

            

            <code class="ruby">        unit_price: BigDecimal(row[:unit_price].to_i * 0.01, 4),</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="18">
            
            

            

            <code class="ruby">        created_at: Time.now,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="19">
            
            

            

            <code class="ruby">        updated_at: Time.now</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="20">
            
            

            

            <code class="ruby">        })</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="21">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="22">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="23">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="24">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_all_by_invoice_id(inv_id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="25">
            
            

            

            <code class="ruby">    @all.find_all {|row| row.invoice_id == inv_id}</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="26">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="27">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="28">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def add_new(new_id, attributes)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="29">
            
            

            

            <code class="ruby">    ii = InvoiceItem.new({</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="30">
            
            

            

            <code class="ruby">      id: new_id,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="31">
            
            

            

            <code class="ruby">      :item_id =&gt; attributes[:item_id],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="32">
            
            

            

            <code class="ruby">      :invoice_id =&gt; attributes[:invoice_id],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="33">
            
            

            

            <code class="ruby">      :quantity =&gt; attributes[:quantity],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="34">
            
            

            

            <code class="ruby">      :unit_price =&gt; attributes[:unit_price],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="35">
            
            

            

            <code class="ruby">      :created_at =&gt; attributes[:created_at],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="36">
            
            

            

            <code class="ruby">      :updated_at =&gt; attributes[:updated_at]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="37">
            
            

            

            <code class="ruby">      })</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="38">
            
            

            

            <code class="ruby">    @all.append(ii)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="39">
            
            

            

            <code class="ruby">    ii</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="40">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="41">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="42">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def change(id, key, value)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="43">
            
            

            

            <code class="ruby">    if key == :quantity</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="44">
            
            

            

            <code class="ruby">      find_by_id(id).quantity = value</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="45">
            
            

            

            <code class="ruby">    elsif key == :unit_price</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="46">
            
            

            

            <code class="ruby">      find_by_id(id).unit_price = value</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="47">
            
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="48">
            
            

            

            <code class="ruby">      return nil</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="49">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="50">
            
            

            

            <code class="ruby">    find_by_id(id).updated_at = Time.now</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="51">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="52">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="814c0fb45dd8e6ddcda193c5f3e6a3ba8c9f6dc9">
  <div class="header">
    <h3>lib/invoice_repository.rb</h3>
    <h4>
      <span class="red">
  66.67%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>21</b> relevant lines.
      <span class="green"><b>14</b> lines covered</span> and
      <span class="red"><b>7</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">require_relative &#39;./enumerable&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">class InvoiceRepository</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">  include Enumerable</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_reader :all, :file_path</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="7">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def initialize(file_path)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="8">
            <span class="hits">16</span>
            

            

            <code class="ruby">    @file_path = file_path</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="9">
            <span class="hits">16</span>
            

            

            <code class="ruby">    @all = []</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="11">
            <span class="hits">16</span>
            

            

            <code class="ruby">    CSV.foreach(file_path, headers: true, header_converters: :symbol) do |row|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="79760" data-linenumber="12">
            <span class="hits">79760</span>
            

            

            <code class="ruby">      @all &lt;&lt; Invoice.new({</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="13">
            
            

            

            <code class="ruby">        :id          =&gt; row[:id],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="14">
            
            

            

            <code class="ruby">        :customer_id =&gt; row[:customer_id],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="15">
            
            

            

            <code class="ruby">        :merchant_id =&gt; row[:merchant_id],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            
            

            

            <code class="ruby">        :status      =&gt; row[:status],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="17">
            
            

            

            <code class="ruby">        :created_at  =&gt; Time.now,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="18">
            
            

            

            <code class="ruby">        :updated_at  =&gt; Time.now</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="19">
            
            

            

            <code class="ruby">        })</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="20">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="21">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="22">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="23">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_all_by_customer_id(cust_id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="24">
            
            

            

            <code class="ruby">    @all.find_all {|row| row.customer_id == cust_id}</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="26">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="27">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_all_by_status(condition)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="14958" data-linenumber="28">
            <span class="hits">14958</span>
            

            

            <code class="ruby">    @all.find_all {|row| row.status == condition}</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="29">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="30">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="31">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def add_new(new_id, attributes)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="32">
            
            

            

            <code class="ruby">    i = Invoice.new({</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="33">
            
            

            

            <code class="ruby">                    id: new_id,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="34">
            
            

            

            <code class="ruby">                    customer_id: attributes[:customer_id],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="35">
            
            

            

            <code class="ruby">                    merchant_id: attributes[:merchant_id],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="36">
            
            

            

            <code class="ruby">                    status: attributes[:status],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="37">
            
            

            

            <code class="ruby">                    created_at: Time.now,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="38">
            
            

            

            <code class="ruby">                    updated_at: Time.now</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="39">
            
            

            

            <code class="ruby">                    })</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="40">
            
            

            

            <code class="ruby">    @all.append(i)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="41">
            
            

            

            <code class="ruby">    i</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="42">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="43">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="44">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def change(id, key, value)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="45">
            
            

            

            <code class="ruby">    if key == :status</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="46">
            
            

            

            <code class="ruby">      find_by_id(id).status = value.to_sym</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="47">
            
            

            

            <code class="ruby">      find_by_id(id).updated_at = Time.now</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="48">
            
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="49">
            
            

            

            <code class="ruby">      return nil</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="50">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="51">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="52">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="50bad2b60bf34b073e6f61634d96eac59eedded9">
  <div class="header">
    <h3>lib/item.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>13</b> relevant lines.
      <span class="green"><b>13</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">require_relative &#39;./enumerable&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">class Item</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">  include Enumerable</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_reader :id, :created_at, :merchant_id</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="6">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_accessor :name, :description, :unit_price, :updated_at</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="8">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def initialize(item_data)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="21872" data-linenumber="9">
            <span class="hits">21872</span>
            

            

            <code class="ruby">    @id = item_data[:id].to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="21872" data-linenumber="10">
            <span class="hits">21872</span>
            

            

            <code class="ruby">    @name = item_data[:name]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="21872" data-linenumber="11">
            <span class="hits">21872</span>
            

            

            <code class="ruby">    @description = item_data[:description]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="21872" data-linenumber="12">
            <span class="hits">21872</span>
            

            

            <code class="ruby">    @unit_price = item_data[:unit_price]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="21872" data-linenumber="13">
            <span class="hits">21872</span>
            

            

            <code class="ruby">    @created_at = item_data[:created_at]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="21872" data-linenumber="14">
            <span class="hits">21872</span>
            

            

            <code class="ruby">    @updated_at = item_data[:updated_at]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="21872" data-linenumber="15">
            <span class="hits">21872</span>
            

            

            <code class="ruby">    @merchant_id = item_data[:merchant_id].to_i</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="17">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="177caf66802caeaf51a7f7fbf03afa9c04188dcb">
  <div class="header">
    <h3>lib/item_repository.rb</h3>
    <h4>
      <span class="red">
  53.33%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>30</b> relevant lines.
      <span class="green"><b>16</b> lines covered</span> and
      <span class="red"><b>14</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;csv&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;BigDecimal&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">require_relative &#39;./enumerable&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>
            

            

            <code class="ruby">class ItemRepository</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="6">
            <span class="hits">1</span>
            

            

            <code class="ruby">  include Enumerable</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="7">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_accessor :all</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="9">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def initialize(file_path)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="10">
            <span class="hits">16</span>
            

            

            <code class="ruby">    @file_path = file_path</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="11">
            <span class="hits">16</span>
            

            

            <code class="ruby">    @all = []</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="12">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="13">
            <span class="hits">16</span>
            

            

            <code class="ruby">    CSV.foreach(file_path, headers: true, header_converters: :symbol) do |row|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="21872" data-linenumber="14">
            <span class="hits">21872</span>
            

            

            <code class="ruby">      @all &lt;&lt; Item.new({</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="15">
            
            

            

            <code class="ruby">        id: row[:id], name: row[:name], description: row[:description], unit_price: BigDecimal(row[:unit_price].to_i * 0.01, 4), merchant_id: row[:merchant_id], created_at: row[:created_at], updated_at: row[:updated_at]})</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="17">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="18">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="19">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_all_with_description(description)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="20">
            
            

            

            <code class="ruby">    @all.find_all {|row| row.description.include?(description)}</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="21">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="22">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="23">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_all_by_price(price)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="24">
            
            

            

            <code class="ruby">    @all.find_all {|row| row.unit_price_to_dollars == price}</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="26">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="27">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_all_by_price_in_range(range)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="28">
            
            

            

            <code class="ruby">    @all.find_all {|row| range.include?(row.unit_price)}</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="29">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="30">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="31">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def add_new(new_id, attributes)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="32">
            
            

            

            <code class="ruby">    i = Item.new({</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="33">
            
            

            

            <code class="ruby">      id: new_id,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="34">
            
            

            

            <code class="ruby">      name: attributes[:name],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="35">
            
            

            

            <code class="ruby">      description: attributes[:description],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="36">
            
            

            

            <code class="ruby">      unit_price: attributes[:unit_price],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="37">
            
            

            

            <code class="ruby">      created_at: attributes[:created_at],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="38">
            
            

            

            <code class="ruby">      updated_at: attributes[:updated_at],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="39">
            
            

            

            <code class="ruby">      merchant_id: attributes[:merchant_id]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="40">
            
            

            

            <code class="ruby">      })</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="41">
            
            

            

            <code class="ruby">    @all.append(i)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="42">
            
            

            

            <code class="ruby">    i</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="43">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="44">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="45">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def change(id, key, value)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="46">
            
            

            

            <code class="ruby">    if key == :unit_price</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="47">
            
            

            

            <code class="ruby">      find_by_id(id).unit_price = value</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="48">
            
            

            

            <code class="ruby">    elsif key == :description</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="49">
            
            

            

            <code class="ruby">      find_by_id(id).description = value</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="50">
            
            

            

            <code class="ruby">    elsif key == :name</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="51">
            
            

            

            <code class="ruby">      find_by_id(id).name = value</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="52">
            
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="53">
            
            

            

            <code class="ruby">      return nil</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="54">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="55">
            
            

            

            <code class="ruby">    find_by_id(id).updated_at = Time.now</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="56">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="57">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="b980855699b82200604cdf81da7829de3e871b30">
  <div class="header">
    <h3>lib/merchant.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>6</b> relevant lines.
      <span class="green"><b>6</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class Merchant</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_reader :id</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_accessor :name</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def initialize(merchant)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7600" data-linenumber="6">
            <span class="hits">7600</span>
            

            

            <code class="ruby">    @id = merchant[:id].to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7600" data-linenumber="7">
            <span class="hits">7600</span>
            

            

            <code class="ruby">    @name = merchant[:name]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="731243b6bab1f0e2089014b0a3f9e77a52ad39ff">
  <div class="header">
    <h3>lib/merchant_repository.rb</h3>
    <h4>
      <span class="red">
  70.59%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>17</b> relevant lines.
      <span class="green"><b>12</b> lines covered</span> and
      <span class="red"><b>5</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">require_relative &#39;./enumerable&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">class MerchantRepository</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">  include Enumerable</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_reader :file_path, :all</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="7">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def initialize(file_path)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="8">
            <span class="hits">16</span>
            

            

            <code class="ruby">    @file_path = file_path</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="9">
            <span class="hits">16</span>
            

            

            <code class="ruby">    @all = []</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="10">
            <span class="hits">16</span>
            

            

            <code class="ruby">    CSV.foreach(file_path, headers: true, header_converters: :symbol) do |row|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7600" data-linenumber="11">
            <span class="hits">7600</span>
            

            

            <code class="ruby">      @all &lt;&lt; Merchant.new(:id =&gt;row[:id],:name =&gt; row[:name])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="12">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="13">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="14">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="15">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_all_by_name(name)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="16">
            
            

            

            <code class="ruby">    @all.find_all do |row|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="17">
            
            

            

            <code class="ruby">      row.name.upcase.include?(name.upcase)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="18">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="19">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="20">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="21">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def add_new(new_id, attributes)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="22">
            
            

            

            <code class="ruby">    @all &lt;&lt;  Merchant.new({:id =&gt; new_id,:name =&gt; attributes})</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="23">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="24">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="25">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def change(id, key, value)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="26">
            
            

            

            <code class="ruby">    if key == :name</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="27">
            
            

            

            <code class="ruby">      find_by_id(id).name = value</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="28">
            
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="29">
            
            

            

            <code class="ruby">      return nil</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="30">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="31">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="32">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="c558a235768a595534dc1945991abd07b4af324d">
  <div class="header">
    <h3>lib/sales_analyst.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>89</b> relevant lines.
      <span class="green"><b>89</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class SalesAnalyst</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_reader :item_repository, :merchant_repository, :invoice_repository, :transaction_repository</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="3">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def initialize(item_repo, merchant_repo, invoice_repo, transaction_repo)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="5">
            <span class="hits">16</span>
            

            

            <code class="ruby">    @item_repository = item_repo</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="6">
            <span class="hits">16</span>
            

            

            <code class="ruby">    @merchant_repository = merchant_repo</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="7">
            <span class="hits">16</span>
            

            

            <code class="ruby">    @invoice_repository = invoice_repo</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="8">
            <span class="hits">16</span>
            

            

            <code class="ruby">    @transaction_repository = transaction_repo</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="11">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def average_items_per_merchant</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1426" data-linenumber="12">
            <span class="hits">1426</span>
            

            

            <code class="ruby">    (@item_repository.all.length.to_f / @merchant_repository.all.length).round(2)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="13">
            
            

            

            <code class="ruby">    #round(2) rounds it to the second decimal place (2.88 vs 2.8842)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="14">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="15">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="16">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def average_items_per_merchant_standard_deviation</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="17">
            <span class="hits">4</span>
            

            

            <code class="ruby">    merchant_ids</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="18">
            <span class="hits">4</span>
            

            

            <code class="ruby">    items_count_list</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="19">
            <span class="hits">4</span>
            

            

            <code class="ruby">    list = items_count_list # list = items_count_list.sample(5)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="20">
            <span class="hits">4</span>
            

            

            <code class="ruby">    mean = list.sum.to_f / list.size</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1904" data-linenumber="21">
            <span class="hits">1904</span>
            

            

            <code class="ruby">    sum = list.sum {|num| (num - mean)**2}</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="22">
            <span class="hits">4</span>
            

            

            <code class="ruby">    sd = (Math.sqrt(sum / (list.size - 1))).round(2)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="23">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="24">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="25">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def merchant_ids</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="8092" data-linenumber="26">
            <span class="hits">8092</span>
            

            

            <code class="ruby">    @merch_ids = @merchant_repository.all.map {|merchant| merchant.id}</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="27">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="28">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="29">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def items_count_list</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4760" data-linenumber="30">
            <span class="hits">4760</span>
            

            

            <code class="ruby">    items_list = @merch_ids.map {|id| @item_repository.find_all_by_merchant_id(id).count}</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="31">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="32">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="33">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def merchants_with_high_item_count</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="34">
            <span class="hits">3</span>
            

            

            <code class="ruby">    sd = average_items_per_merchant_standard_deviation</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="35">
            <span class="hits">3</span>
            

            

            <code class="ruby">    high_sellers = merchant_ids.find_all do |id|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1425" data-linenumber="36">
            <span class="hits">1425</span>
            

            

            <code class="ruby">      @item_repository.find_all_by_merchant_id(id).count &gt; (sd + average_items_per_merchant)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="37">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="159" data-linenumber="38">
            <span class="hits">159</span>
            

            

            <code class="ruby">    high_seller_merchants = high_sellers.map {|seller| @merchant_repository.find_by_id(seller)}</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="39">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="40">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="41">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def average_item_price_for_merchant(merchant_id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="952" data-linenumber="42">
            <span class="hits">952</span>
            

            

            <code class="ruby">    items = @item_repository.find_all_by_merchant_id(merchant_id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3692" data-linenumber="43">
            <span class="hits">3692</span>
            

            

            <code class="ruby">    prices = items.map {|item| item.unit_price_to_dollars}</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="952" data-linenumber="44">
            <span class="hits">952</span>
            

            

            <code class="ruby">    (prices.sum/items.count).round(2)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="45">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="46">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="47">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def average_average_price_per_merchant</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="952" data-linenumber="48">
            <span class="hits">952</span>
            

            

            <code class="ruby">    averages = merchant_ids.map {|merchant_id| average_item_price_for_merchant(merchant_id)}</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="49">
            <span class="hits">2</span>
            

            

            <code class="ruby">    (averages.sum / averages.count).floor(2)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="50">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="51">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="52">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def golden_items</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2736" data-linenumber="53">
            <span class="hits">2736</span>
            

            

            <code class="ruby">    prices = @item_repository.all.map {|item| item.unit_price_to_dollars}</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2736" data-linenumber="54">
            <span class="hits">2736</span>
            

            

            <code class="ruby">    @item_repository.all.find_all {|item| item.unit_price_to_dollars &gt; (prices.sum / prices.size + sd_prices * 2)}</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="55">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="56">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="57">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def sd_prices</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3740112" data-linenumber="58">
            <span class="hits">3740112</span>
            

            

            <code class="ruby">    prices = @item_repository.all.map {|item| item.unit_price_to_dollars}</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2734" data-linenumber="59">
            <span class="hits">2734</span>
            

            

            <code class="ruby">    mean = prices.sum / prices.size</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3740112" data-linenumber="60">
            <span class="hits">3740112</span>
            

            

            <code class="ruby">    sum = prices.sum {|num| (num - mean)**2}</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2734" data-linenumber="61">
            <span class="hits">2734</span>
            

            

            <code class="ruby">    price_sd = (Math.sqrt(sum / (prices.size - 1))).round(2)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="62">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="63">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="64">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def average_invoices_per_merchant</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="951" data-linenumber="65">
            <span class="hits">951</span>
            

            

            <code class="ruby">    (@invoice_repository.all.length.to_f / @merchant_repository.all.length).round(2)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="66">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="67">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="68">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def invoices_count_list</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2856" data-linenumber="69">
            <span class="hits">2856</span>
            

            

            <code class="ruby">    invoices_list = @merch_ids.map {|id| @invoice_repository.find_all_by_merchant_id(id).count}</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="70">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="71">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="72">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def average_invoices_per_merchant_standard_deviation</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="73">
            <span class="hits">3</span>
            

            

            <code class="ruby">    merchant_ids</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="74">
            <span class="hits">3</span>
            

            

            <code class="ruby">    invoices_count_list</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="75">
            <span class="hits">3</span>
            

            

            <code class="ruby">    list = invoices_count_list</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="76">
            <span class="hits">3</span>
            

            

            <code class="ruby">    mean = list.sum.to_f / list.size</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1428" data-linenumber="77">
            <span class="hits">1428</span>
            

            

            <code class="ruby">    sum = list.sum {|num| (num - mean)**2}</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="78">
            <span class="hits">3</span>
            

            

            <code class="ruby">    sd = (Math.sqrt(sum / (list.size - 1))).round(2)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="79">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="80">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="81">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def top_merchants_by_invoice_count</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="82">
            <span class="hits">1</span>
            

            

            <code class="ruby">    sd = average_invoices_per_merchant_standard_deviation</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="83">
            <span class="hits">1</span>
            

            

            <code class="ruby">    high_merchants = merchant_ids.find_all do |id|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="475" data-linenumber="84">
            <span class="hits">475</span>
            

            

            <code class="ruby">      @invoice_repository.find_all_by_merchant_id(id).count &gt; ((sd * 2) + average_invoices_per_merchant)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="85">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="13" data-linenumber="86">
            <span class="hits">13</span>
            

            

            <code class="ruby">    high_invoice_merchants = high_merchants.map {|merchant| @merchant_repository.find_by_id(merchant)}</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="87">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="88">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="89">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def bottom_merchants_by_invoice_count</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="90">
            <span class="hits">1</span>
            

            

            <code class="ruby">    sd = average_invoices_per_merchant_standard_deviation</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="91">
            <span class="hits">1</span>
            

            

            <code class="ruby">    low_merchants = merchant_ids.find_all do |id|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="475" data-linenumber="92">
            <span class="hits">475</span>
            

            

            <code class="ruby">      @invoice_repository.find_all_by_merchant_id(id).count &lt; ((sd * -2) + average_invoices_per_merchant)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="93">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="94">
            <span class="hits">5</span>
            

            

            <code class="ruby">    low_invoice_merchants = low_merchants.map {|merchant| @merchant_repository.find_by_id(merchant)}</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="95">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="96">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="97">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def day_of_week</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="98">
            <span class="hits">2</span>
            

            

            <code class="ruby">    new_date_format = []</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="99">
            <span class="hits">2</span>
            

            

            <code class="ruby">    CSV.foreach(@invoice_repository.file_path, headers: true, header_converters: :symbol) do |row|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="9970" data-linenumber="100">
            <span class="hits">9970</span>
            

            

            <code class="ruby">      new_date_format &lt;&lt; row[:created_at].split(&quot;-&quot;)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="101">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="102">
            <span class="hits">2</span>
            

            

            <code class="ruby">    days_of_week = new_date_format.map do |date|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="9970" data-linenumber="103">
            <span class="hits">9970</span>
            

            

            <code class="ruby">      Time.new(date[0].to_i, date[1].to_i, date[2].to_i).wday</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="104">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="105">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="106">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="107">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def average_invoices_per_day_standard_deviation</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="108">
            <span class="hits">1</span>
            

            

            <code class="ruby">    @tally = day_of_week.tally</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="109">
            <span class="hits">1</span>
            

            

            <code class="ruby">    @mean = @tally.values.sum / 7.to_f</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="110">
            <span class="hits">1</span>
            

            

            <code class="ruby">    list = @tally.values</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="8" data-linenumber="111">
            <span class="hits">8</span>
            

            

            <code class="ruby">    sum = list.sum {|num| (num - @mean)**2}</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="112">
            <span class="hits">1</span>
            

            

            <code class="ruby">    @sd = (Math.sqrt(sum / (list.size - 1))).round(2)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="113">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="114">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="115">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def top_days_by_invoice_count</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="116">
            <span class="hits">1</span>
            

            

            <code class="ruby">    day_of_week</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="117">
            <span class="hits">1</span>
            

            

            <code class="ruby">    average_invoices_per_day_standard_deviation</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="118">
            <span class="hits">1</span>
            

            

            <code class="ruby">    top_day =[]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="119">
            <span class="hits">1</span>
            

            

            <code class="ruby">    @tally.each do |day, total|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="120">
            <span class="hits">7</span>
            

            

            <code class="ruby">      if total &gt; (@mean + @sd)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="121">
            <span class="hits">1</span>
            

            

            <code class="ruby">        top_day &lt;&lt; day</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="122">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="123">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="124">
            <span class="hits">1</span>
            

            

            <code class="ruby">    top_day</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="125">
            
            

            

            <code class="ruby">    # best_day(top_day)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="126">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="127">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="128">
            
            

            

            <code class="ruby">  # def best_day(day)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="129">
            
            

            

            <code class="ruby">  #   days = {0 =&gt; &quot;Sunday&quot;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="130">
            
            

            

            <code class="ruby">  #           1 =&gt; &quot;Monday&quot;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="131">
            
            

            

            <code class="ruby">  #           2 =&gt; &quot;Tuesday&quot;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="132">
            
            

            

            <code class="ruby">  #           3 =&gt; &quot;Wednesday&quot;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="133">
            
            

            

            <code class="ruby">  #           4 =&gt; &quot;Thursday&quot;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="134">
            
            

            

            <code class="ruby">  #           5 =&gt; &quot;Friday&quot;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="135">
            
            

            

            <code class="ruby">  #           6 =&gt; &quot;Saturday&quot;}</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="136">
            
            

            

            <code class="ruby">  #</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="137">
            
            

            

            <code class="ruby">  #   top = days[day]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="138">
            
            

            

            <code class="ruby">  #</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="139">
            
            

            

            <code class="ruby">  # end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="140">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="141">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def invoice_status(status)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="142">
            <span class="hits">3</span>
            

            

            <code class="ruby">    ((@invoice_repository.find_all_by_status(status).count / @invoice_repository.all.count.to_f) * 100).round(2)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="143">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="144">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="145">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def invoice_paid_in_full?(id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="146">
            <span class="hits">4</span>
            

            

            <code class="ruby">    transactions = @transaction_repository.find_all_by_invoice_id(id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="147">
            <span class="hits">4</span>
            

            

            <code class="ruby">    if transactions == []</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="148">
            <span class="hits">1</span>
            

            

            <code class="ruby">      return false</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="149">
            
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="150">
            <span class="hits">3</span>
            

            

            <code class="ruby">      transactions.all? do |transaction|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="151">
            <span class="hits">5</span>
            

            

            <code class="ruby">        transaction.result == :success</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="152">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="153">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="154">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="155">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="48d43f8edf576f936fa28da7b8f13b2f94b7b70d">
  <div class="header">
    <h3>lib/sales_engine.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>11</b> relevant lines.
      <span class="green"><b>11</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class SalesEngine</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_reader :item_repository, :merchant_repository, :analyst, :invoice_repository, :invoice_items, :transactions</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="3">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def initialize(items_path, merchants_path, invoice_path, invoice_items_path, transactions_path)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="5">
            <span class="hits">16</span>
            

            

            <code class="ruby">    @item_repository = ItemRepository.new(items_path)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="6">
            <span class="hits">16</span>
            

            

            <code class="ruby">    @merchant_repository = MerchantRepository.new(merchants_path)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="7">
            <span class="hits">16</span>
            

            

            <code class="ruby">    @invoice_repository = InvoiceRepository.new(invoice_path)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="8">
            <span class="hits">16</span>
            

            

            <code class="ruby">    @invoice_items = InvoiceItemRepository.new(invoice_items_path)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="9">
            <span class="hits">16</span>
            

            

            <code class="ruby">    @transactions = TransactionRepository.new(transactions_path)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="10">
            <span class="hits">16</span>
            

            

            <code class="ruby">    @analyst = SalesAnalyst.new(@item_repository, @merchant_repository, @invoice_repository, @transactions)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="11">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="12">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="13">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def self.from_csv(data)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="14">
            <span class="hits">16</span>
            

            

            <code class="ruby">    SalesEngine.new(data[:items], data[:merchants], data[:invoice], data[:invoice_items], data[:transactions])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="15">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="17">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="18">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="c60e3aa0403351fe53ce3743685e8b277ba822de">
  <div class="header">
    <h3>lib/transaction.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>11</b> relevant lines.
      <span class="green"><b>11</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class Transaction</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_reader :id, :invoice_id, :created_at</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_accessor :credit_card_number, :credit_card_expiration_date, :result, :updated_at</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def initialize(info)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="79760" data-linenumber="6">
            <span class="hits">79760</span>
            

            

            <code class="ruby">    @id = info[:id].to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="79760" data-linenumber="7">
            <span class="hits">79760</span>
            

            

            <code class="ruby">    @invoice_id = info[:invoice_id].to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="79760" data-linenumber="8">
            <span class="hits">79760</span>
            

            

            <code class="ruby">    @credit_card_number = info[:credit_card_number].to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="79760" data-linenumber="9">
            <span class="hits">79760</span>
            

            

            <code class="ruby">    @credit_card_expiration_date = info[:credit_card_expiration_date]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="79760" data-linenumber="10">
            <span class="hits">79760</span>
            

            

            <code class="ruby">    @result = info[:result].downcase.to_sym</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="79760" data-linenumber="11">
            <span class="hits">79760</span>
            

            

            <code class="ruby">    @created_at = info[:created_at]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="79760" data-linenumber="12">
            <span class="hits">79760</span>
            

            

            <code class="ruby">    @updated_at = info[:updated_at]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="13">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="14">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="d5798281d092cd84bc5eca4aaff65551ee12e432">
  <div class="header">
    <h3>lib/transaction_repository.rb</h3>
    <h4>
      <span class="red">
  51.85%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>27</b> relevant lines.
      <span class="green"><b>14</b> lines covered</span> and
      <span class="red"><b>13</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">require_relative &#39;./enumerable&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">class TransactionRepository</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">  include Enumerable</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_reader :all</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="7">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def initialize(file_path)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="8">
            <span class="hits">16</span>
            

            

            <code class="ruby">    @all = []</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16" data-linenumber="10">
            <span class="hits">16</span>
            

            

            <code class="ruby">    CSV.foreach(file_path, headers: true, header_converters: :symbol) do |row|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="79760" data-linenumber="11">
            <span class="hits">79760</span>
            

            

            <code class="ruby">      @all &lt;&lt; Transaction.new({</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="12">
            
            

            

            <code class="ruby">        id: row[:id],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="13">
            
            

            

            <code class="ruby">        invoice_id: row[:invoice_id],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="14">
            
            

            

            <code class="ruby">        credit_card_number: row[:credit_card_number].to_i,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="15">
            
            

            

            <code class="ruby">        credit_card_expiration_date:  row[:credit_card_expiration_date],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            
            

            

            <code class="ruby">        result: row[:result].downcase,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="17">
            
            

            

            <code class="ruby">        created_at: row[:created_at],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="18">
            
            

            

            <code class="ruby">        updated_at: row[:updated_at]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="19">
            
            

            

            <code class="ruby">        })</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="20">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="21">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="22">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="23">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_all_by_invoice_id(id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="19944" data-linenumber="24">
            <span class="hits">19944</span>
            

            

            <code class="ruby">    @all.find_all {|row| row.invoice_id == id}</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="26">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="27">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_all_by_credit_card_number(cc_number)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="28">
            
            

            

            <code class="ruby">    @all.find_all {|row| row.credit_card_number == cc_number.to_i}</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="29">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="30">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="31">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_all_by_result(rslt)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="32">
            
            

            

            <code class="ruby">    @all.find_all {|row| row.result == rslt}</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="33">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="34">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="35">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def add_new(new_id, attributes)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="36">
            
            

            

            <code class="ruby">    t = Transaction.new({</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="37">
            
            

            

            <code class="ruby">      id: new_id,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="38">
            
            

            

            <code class="ruby">      invoice_id: attributes[:invoice_id],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="39">
            
            

            

            <code class="ruby">      credit_card_number: attributes[:credit_card_number],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="40">
            
            

            

            <code class="ruby">      credit_card_expiration_date: attributes[:credit_card_expiration_date],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="41">
            
            

            

            <code class="ruby">      result: attributes[:result],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="42">
            
            

            

            <code class="ruby">      created_at: attributes[:created_at],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="43">
            
            

            

            <code class="ruby">      updated_at: attributes[:updated_at]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="44">
            
            

            

            <code class="ruby">      })</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="45">
            
            

            

            <code class="ruby">    @all.append(t)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="46">
            
            

            

            <code class="ruby">    t</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="47">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="48">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="49">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def change(id, key, value)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="50">
            
            

            

            <code class="ruby">    if key == :credit_card_number</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="51">
            
            

            

            <code class="ruby">      find_by_id(id).credit_card_number = value</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="52">
            
            

            

            <code class="ruby">    elsif key == :credit_card_expiration_date</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="53">
            
            

            

            <code class="ruby">      find_by_id(id).credit_card_expiration_date = value</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="54">
            
            

            

            <code class="ruby">    elsif key == :result</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="55">
            
            

            

            <code class="ruby">      find_by_id(id).result = value</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="56">
            
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="57">
            
            

            

            <code class="ruby">      return nil</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="58">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="59">
            
            

            

            <code class="ruby">    find_by_id(id).updated_at = Time.now</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="60">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="61">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
      </div>
    </div>
  </body>
</html>
